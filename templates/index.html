<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Summarizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f0f2f5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            flex-direction: column;
            justify-content: center;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
        }

        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .footer {
            margin-top: 20px;
            text-align: center;
        }

        .social-icons img {
            width: 35px;
            height: 35px;
            margin: 0 10px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .social-icons img:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div id="copyFeedback" class="copy-feedback">
        Copied to clipboard! ✓
    </div>

    <div class="container">
        <div class="card p-4">
            <h2 class="text-center mb-4">✨ Content Summarizer</h2>
            
            <div class="mb-3">
                <textarea 
                    id="content" 
                    class="form-control" 
                    rows="6" 
                    placeholder="Enter your text here to get a concise summary..."
                    oninput="updateCharCount()"
                ></textarea>
                <div class="d-flex justify-content-end mt-2">
                    <span class="char-count" id="charCount">0 characters</span>
                </div>
            </div>

            <div class="d-flex gap-2 mb-3">
                <button 
                    class="btn btn-primary flex-grow-1 d-flex align-items-center justify-content-center" 
                    onclick="summarizeText()" 
                    id="summarizeBtn"
                >
                    <span>Summarize Text</span>
                </button>
                <button 
                    class="btn btn-outline-secondary d-flex align-items-center justify-content-center" 
                    onclick="clearText()" 
                    id="clearBtn"
                >
                    <span>Clear</span>
                </button>
            </div>

            <div class="mt-4 summary-box p-3 d-none fade-in" id="summary-box">
                <div class="summary-header mb-3">
                    <h5 class="mb-0">Summary</h5>
                    <button 
                        class="btn btn-outline-secondary copy-btn" 
                        onclick="copyToClipboard()"
                        id="copyBtn"
                    >
                        Copy
                    </button>
                </div>
                <p id="summary" class="mb-0"></p>
            </div>
        </div>
    </div>

    <!-- Footer with Social Links -->
    <div class="footer">
        <div class="social-icons">
            <a href="https://github.com/Shadab-2604" target="_blank">
                <img src="github.png" alt="GitHub">
            </a>
            <a href="https://www.linkedin.com/in/your-linkedin" target="_blank">
                <img src="linkedin.png" alt="LinkedIn">
            </a>
        </div>
    </div>

    <script>
        function updateCharCount() {
            const content = document.getElementById('content').value;
            const count = content.length;
            document.getElementById('charCount').textContent = 
                `${count.toLocaleString()} character${count !== 1 ? 's' : ''}`;
        }

        function clearText() {
            document.getElementById('content').value = '';
            document.getElementById('summary-box').classList.add('d-none');
            updateCharCount();
        }

        function copyToClipboard() {
            const summaryText = document.getElementById('summary').innerText;
            navigator.clipboard.writeText(summaryText).then(() => {
                showCopyFeedback();
            });
        }

        function showCopyFeedback() {
            const feedback = document.getElementById('copyFeedback');
            feedback.classList.add('show');
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 2000);
        }

        function setLoading(isLoading) {
            const btn = document.getElementById('summarizeBtn');
            if (isLoading) {
                btn.innerHTML = `
                    <div class="spinner-border spinner-border-sm" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <span>Processing...</span>
                `;
                btn.disabled = true;
            } else {
                btn.innerHTML = '<span>Summarize Text</span>';
                btn.disabled = false;
            }
        }

        function summarizeText() {
            const content = document.getElementById('content').value;
            if (!content.trim()) {
                alert('Please enter some text to summarize.');
                return;
            }

            setLoading(true);

            fetch('/summarize', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ content })
            })
            .then(response => response.json())
            .then(data => {
                if (data.summary) {
                    const summaryBox = document.getElementById('summary-box');
                    document.getElementById('summary').innerText = data.summary;
                    summaryBox.classList.remove('d-none');
                } else {
                    alert('Error: ' + data.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while summarizing the text. Please try again.');
            })
            .finally(() => {
                setLoading(false);
            });
        }
    </script>
</body>
</html>
